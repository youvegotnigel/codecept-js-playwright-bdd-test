<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CodeceptJS + Playwright — Interactive Cheat Sheet</title>
  <style>
    :root{--bg:#ffffff;--card:#f8f9fa;--muted:#4a5568;--accent:#0ea5a4;--glass: rgba(0,0,0,0.04);}
    *{box-sizing:border-box}
    body{font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial; margin:0; padding:24px; background:linear-gradient(180deg,#071024 0%,#091223 100%); color:#e6eef6}
    .wrap{max-width:1100px;margin:0 auto}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between}
    h1{font-size:20px;margin:0}
    p.lead{margin:6px 0 18px;color:var(--muted)}
    .controls{display:flex;gap:8px;align-items:center}
    input.search{padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:rgba(0,0,0,0.2);color:inherit;min-width:260px}
    .toggle{padding:6px 10px;border-radius:8px;background:var(--card);border:1px solid rgba(255,255,255,0.02);cursor:pointer}
    .grid{display:grid;grid-template-columns:1fr 340px;gap:16px;margin-top:18px}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6);}
    .sidebar .card{position:sticky;top:24px}
    .section{margin-bottom:14px}
    .section h2{font-size:14px;margin:0 0 8px}
    .list{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
    pre.code{background:#eef2f7;padding:12px;border-radius:8px;overflow:auto;margin:8px 0;font-size:12px;color:#1a202c;}
    code.k{color:var(--accent);font-weight:600}
    .meta{color:var(--muted);font-size:13px}
    .btn{display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border-radius:10px;background:#e2e8f0;color:#1a202c;border:1px solid #cbd5e1;cursor:pointer;font-weight:500;}
    .copy{float:right}
    .collapse{background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;margin-top:8px}
    .small{font-size:13px;color:var(--muted)}
    .tag{display:inline-block;background:#f1f5f9;color:#1e293b;padding:6px 10px;border-radius:999px;font-size:12px;margin:4px;border:1px solid #cbd5e1;font-weight:500;}
    .search-hit{border-left:3px solid var(--accent);padding-left:10px}
    footer{margin-top:16px;color:var(--muted);font-size:13px}
    @media (max-width:980px){.grid{grid-template-columns:1fr} .list{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>CodeceptJS + Playwright — Interactive Cheat Sheet</h1>
        <p class="lead">Search, copy code snippets, and browse grouped actor <code>I</code> methods and Playwright tips.</p>
      </div>
      <div class="controls">
        <input id="search" class="search" placeholder="Search methods, sections, or keywords..." />
        <button id="download" class="btn" title="Download HTML file">Download</button>
      </div>
    </header>

    <div class="grid">
      <main>
        <div class="card" id="content">

          <!-- Quick links -->
          <div class="section" id="quicklinks">
            <div style="display:flex;gap:8px;flex-wrap:wrap">
              <button class="tag" data-target="nav-quick">Navigation</button>
              <button class="tag" data-target="elements-quick">Elements</button>
              <button class="tag" data-target="forms-quick">Forms</button>
              <button class="tag" data-target="wait-quick">Waiting</button>
              <button class="tag" data-target="grab-quick">Grabbers</button>
              <button class="tag" data-target="runonbrowser-quick">runOnBrowser</button>
            </div>
          </div>

          <!-- Sections -->

          <section class="section" id="nav-quick">
            <h2>Navigation & Page</h2>
            <div class="meta">Core navigation & URL helpers</div>
            <div class="collapse">
              <div class="small">Methods</div>
              <pre class="code" data-code>amOnPage(url)
refreshPage()
seeInCurrentUrl(fragment)
seeCurrentUrlEquals('/path')
goBack()
goForward()
grabCurrentUrl()
waitForNavigation([timeout])</pre>
              <button class="btn copy" data-copy="amOnPage(url)
refreshPage()
seeInCurrentUrl(fragment)
seeCurrentUrlEquals('/path')
goBack()
goForward()
grabCurrentUrl()
waitForNavigation([timeout])">Copy</button>
            </div>
          </section>

          <section class="section" id="elements-quick">
            <h2>Element interactions</h2>
            <div class="meta">Clicking, hovering, moving, etc.</div>
            <div class="collapse">
              <pre class="code">click(locator[, context])
dblClick(locator)
rightClick(locator)
forceClick(locator)
hover(locator)
moveCursorTo(locator, x, y)
scrollTo(locator, x?, y?)
seeElement(locator)
dontSeeElement(locator)</pre>
              <button class="btn copy" data-copy="click(locator[, context])
dblClick(locator)
rightClick(locator)
forceClick(locator)
hover(locator)
moveCursorTo(locator, x, y)
scrollTo(locator, x?, y?)
seeElement(locator)
dontSeeElement(locator)">Copy</button>
            </div>
          </section>

          <section class="section" id="forms-quick">
            <h2>Forms & Inputs</h2>
            <div class="meta">Fill fields, selects, checkboxes, file upload</div>
            <div class="collapse">
              <pre class="code">fillField(locator, value)
appendField(locator, value)
clearField(locator)
selectOption(locator, value|label)
checkOption(locator)
uncheckOption(locator)
attachFile(locator, path)
submitForm(formLocator)</pre>
              <button class="btn copy" data-copy="fillField(locator, value)
appendField(locator, value)
clearField(locator)
selectOption(locator, value|label)
checkOption(locator)
uncheckOption(locator)
attachFile(locator, path)
submitForm(formLocator)">Copy</button>
            </div>
          </section>

          <section class="section" id="wait-quick">
            <h2>Waiting & Synchronization</h2>
            <div class="meta">Prefer smart waits to fixed sleeps</div>
            <div class="collapse">
              <pre class="code">wait(seconds)
waitForElement(locator[, timeout])
waitForVisible(locator[, timeout])
waitForDetached(locator[, timeout])
waitForText(text[, timeout, context])
waitForClickable(locator[, timeout])</pre>
              <button class="btn copy" data-copy="wait(seconds)
waitForElement(locator[, timeout])
waitForVisible(locator[, timeout])
waitForDetached(locator[, timeout])
waitForText(text[, timeout, context])
waitForClickable(locator[, timeout])">Copy</button>
            </div>
          </section>

          <section class="section" id="asserts-quick">
            <h2>Assertions / Checks</h2>
            <div class="meta">Actor assertions + using Node asserts</div>
            <div class="collapse">
              <pre class="code">see(text[, context])
dontSee(text[, context])
seeInField(field, text)
seeElement(locator)
seeInSource(text)
// Use Node assert for strict checks
const assert = require('assert');
assert.strictEqual(await I.grabTextFrom('#title'), 'Expected')</pre>
              <button class="btn copy" data-copy="see(text[, context])
dontSee(text[, context])
seeInField(field, text)
seeElement(locator)
seeInSource(text)
const assert = require('assert');
assert.strictEqual(await I.grabTextFrom('#title'), 'Expected')">Copy</button>
            </div>
          </section>

          <section class="section" id="grab-quick">
            <h2>Grabbers (read values)</h2>
            <div class="meta">Return values from page</div>
            <div class="collapse">
              <pre class="code">grabTextFrom(locator)
grabHTMLFrom(locator)
grabValueFrom(locator)
grabAttributeFrom(locator, attr)
grabNumberOfVisibleElements(locator)
grabCurrentUrl()</pre>
              <button class="btn copy" data-copy="grabTextFrom(locator)
grabHTMLFrom(locator)
grabValueFrom(locator)
grabAttributeFrom(locator, attr)
grabNumberOfVisibleElements(locator)
grabCurrentUrl()">Copy</button>
            </div>
          </section>

          <section class="section" id="frames-quick">
            <h2>Frames / Tabs / runOnBrowser</h2>
            <div class="meta">Access Playwright page/context for advanced flows</div>
            <div class="collapse">
              <pre class="code">// Use runOnBrowser to access native Playwright objects
await I.runOnBrowser(async ({ page, context, browser }) =&gt; {
  const frame = page.frame({ name: 'frameName' });
  await frame.click('#button');
  const title = await page.title();
  return title;
});

// Tabs & popups
openNewTab(), switchToNextTab(), closeCurrentTab()
// Alerts via runOnBrowser: page.on('dialog', d =&gt; d.accept())</pre>
              <button class="btn copy" data-copy="await I.runOnBrowser(async ({ page, context, browser }) => {\n  const frame = page.frame({ name: 'frameName' });\n  await frame.click('#button');\n  const title = await page.title();\n  return title;\n});">Copy</button>
            </div>
          </section>

          <section class="section" id="network-quick">
            <h2>Network / API</h2>
            <div class="meta">REST helper + Playwright routing</div>
            <div class="collapse">
              <pre class="code">// REST helper
const res = await I.sendPostRequest('/api/login', { user:'a', pass:'b' });

// Playwright routing via runOnBrowser
await I.runOnBrowser(async ({ page }) =&gt; {
  await page.route('**/api/**', route =&gt; route.fulfill({ status:200, body: JSON.stringify({ ok:true }) }));
});</pre>
              <button class="btn copy" data-copy="const res = await I.sendPostRequest('/api/login', { user:'a', pass:'b' });\n\nawait I.runOnBrowser(async ({ page }) => {\n  await page.route('**/api/**', route => route.fulfill({ status:200, body: JSON.stringify({ ok:true }) }));\n});">Copy</button>
            </div>
          </section>

          <section class="section" id="playwright-quick">
            <h2>Playwright Helper Tips</h2>
            <div class="meta">Config keys & best practices</div>
            <div class="collapse">
              <pre class="code">// key config options: browser, url, show, waitForTimeout, windowSize
// Use runOnBrowser for complex flows to access page, context, browser
// Prefer data-testids and stable selectors
// Use --steps and saveScreenshot('file.png') for debugging</pre>
              <button class="btn copy" data-copy="// key config options: browser, url, show, waitForTimeout, windowSize\n// Use runOnBrowser for complex flows to access page, context, browser\n// Prefer data-testids and stable selectors\n// Use --steps and saveScreenshot('file.png') for debugging">Copy</button>
            </div>
          </section>

          <footer>
            Tip: Click any <em>Copy</em> button to copy the snippet. Use the search box to filter sections and methods.
          </footer>

        </div>
      </main>

      <aside class="sidebar">
        <div class="card">
          <h3 style="margin-top:0">Cheat sheet index</h3>
          <div class="small" style="margin-bottom:8px">Jump to categories</div>
          <nav style="display:flex;flex-direction:column;gap:6px">
            <a href="#nav-quick" class="small">Navigation & Page</a>
            <a href="#elements-quick" class="small">Element interactions</a>
            <a href="#forms-quick" class="small">Forms & Inputs</a>
            <a href="#wait-quick" class="small">Waiting</a>
            <a href="#asserts-quick" class="small">Assertions</a>
            <a href="#grab-quick" class="small">Grabbers</a>
            <a href="#frames-quick" class="small">Frames / runOnBrowser</a>
            <a href="#network-quick" class="small">Network / API</a>
            <a href="#playwright-quick" class="small">Playwright Tips</a>
          </nav>

          <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:12px 0">

          <div class="small">Actions</div>
          <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap">
            <button id="copyAll" class="btn">Copy all methods</button>
            <button id="toggleDark" class="btn">Toggle Theme</button>
          </div>

          <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:12px 0">
          <div class="small">Generated: interactive single-file HTML</div>
        </div>
      </aside>
    </div>
  </div>

  <script>
    // Copy helper
    function copyText(text){
      if(!navigator.clipboard) {
        const ta = document.createElement('textarea'); ta.value = text; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); ta.remove();
      } else navigator.clipboard.writeText(text);
      // subtle visual feedback
      const notif = document.createElement('div'); notif.textContent = 'Copied!'; notif.style.position='fixed'; notif.style.right='20px'; notif.style.bottom='20px'; notif.style.padding='8px 12px'; notif.style.borderRadius='8px'; notif.style.background='rgba(0,0,0,0.6)'; notif.style.color='#fff'; document.body.appendChild(notif);
      setTimeout(()=>notif.remove(),900);
    }

    // Setup copy buttons
    document.querySelectorAll('[data-copy]').forEach(btn=>{
      btn.addEventListener('click',()=>copyText(btn.getAttribute('data-copy')));
    });

    // Copy all
    document.getElementById('copyAll').addEventListener('click', async ()=>{
      const blocks = Array.from(document.querySelectorAll('pre.code')).map(p=>p.textContent.trim()).join('\n\n');
      copyText(blocks);
    });

    // Search filter
    const search = document.getElementById('search');
    search.addEventListener('input',()=>{
      const q = search.value.trim().toLowerCase();
      document.querySelectorAll('.section').forEach(s=>{
        const text = s.textContent.toLowerCase();
        if(!q) { s.style.display='block'; s.classList.remove('search-hit'); return; }
        if(text.includes(q)) { s.style.display='block'; s.classList.add('search-hit'); }
        else s.style.display='none';
      });
    });

    // Quick tags jump
    document.querySelectorAll('.tag[data-target]').forEach(t=>{
      t.addEventListener('click',()=>{
        const id = t.getAttribute('data-target'); document.getElementById(id).scrollIntoView({behavior:'smooth', block:'start'});
      });
    });

    // Download HTML
    document.getElementById('download').addEventListener('click',()=>{
      const html = '<!doctype html>' + document.documentElement.outerHTML;
      const blob = new Blob([html], {type:'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'codeceptjs-playwright-cheatsheet.html'; a.click(); URL.revokeObjectURL(url);
    });

    // Theme toggle (simple)
    document.getElementById('toggleDark').addEventListener('click', ()=>{
      const r = document.documentElement;
      if(r.style.getPropertyValue('--bg')){
        // toggle to light
        r.style.setProperty('--bg','#f7fafc'); r.style.setProperty('--card','#ffffff'); r.style.setProperty('--muted','#475569'); r.style.setProperty('--accent','#0ea5a4'); r.style.setProperty('--glass','rgba(0,0,0,0.03)'); document.body.style.color='#0b1220'; document.body.style.background='linear-gradient(180deg,#f8fafc 0%,#eef2ff 100%)';
      } else {
        r.style.setProperty('--bg','#0f1724'); r.style.setProperty('--card','#0b1220'); r.style.setProperty('--muted','#9aa7bf'); r.style.setProperty('--accent','#4fd1c5'); r.style.setProperty('--glass','rgba(255,255,255,0.03)'); document.body.style.color='#e6eef6'; document.body.style.background='linear-gradient(180deg,#071024 0%,#091223 100%)';
      }
    });

  </script>
</body>
</html>
